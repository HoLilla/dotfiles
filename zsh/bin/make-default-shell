#!/usr/bin/env bash

set -euo pipefail

ZSH_PATH="$(command -v zsh)"

if ! grep -q "$ZSH_PATH" /etc/shells; then
	echo | sudo gtee -a /etc/shells
	echo "$ZSH_PATH" | sudo gtee -a /etc/shells
fi

if [ "$SHELL" != "$ZSH_PATH" ]; then
	sudo chsh -s "$ZSH_PATH" "$USER"
fi
