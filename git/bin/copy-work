#!/usr/bin/env run-cargo-script

use std::env;
use std::fs;
use std::path::Path;

fn main() -> std::io::Result<()> {
    let home = env!("HOME");
    let config_dir = format!("{}/.config/git", home);
    let config_file = format!("{}/config", config_dir);
    let path = env::current_dir()?;
    let source_file = format!("{}/git/work-config", path.display());

    fs::create_dir_all(&config_dir)?;
    if Path::new(&config_file).exists() {
        fs::remove_file(&config_file)?;
    }
    fs::copy(&source_file, &config_file)?;

    Ok(())
}
